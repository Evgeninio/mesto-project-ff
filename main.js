(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Z:()=>$,H:()=>F});var t=document.querySelector(".content").querySelector(".places").querySelector(".places__list"),n=document.querySelector(".profile__title"),o=document.querySelector(".profile__description"),r=document.querySelector(".profile__edit-button"),c=document.querySelector(".profile__add-button"),a=document.forms["edit-profile"],i=a.querySelector(".popup__input_type_name"),u=a.querySelector(".popup__input_type_description"),l=document.querySelector(".popup__input_type_card-name"),s=document.querySelector(".popup__input_type_url"),d=l.closest(".popup__form"),p=(document.querySelectorAll(".popup__button"),document.querySelectorAll(".popup")),f=document.querySelector(".popup_type_image"),_=document.querySelector(".popup_type_edit"),y=_.querySelector(".popup__input_type_name"),m=_.querySelector(".popup__input_type_description"),v=document.querySelector(".popup__image"),h=document.querySelector(".popup__caption"),S=document.querySelector(".popup_type_edit"),b=document.querySelector(".popup_type_new-card"),g={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button-disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},q=document.querySelector(".profile__avatar"),C=document.forms["new-avatar"],E=document.querySelector(".popup_type_new-avatar"),L=document.querySelector(".popup__input_type_url_avatar"),k=document.getElementById("new-card"),w=document.getElementById("edit-profile"),x=document.getElementById("new-avatar"),A=(document.forms["new-place"],{baseUrl:"https://nomoreparties.co/v1/wff-cohort-7",headers:{authorization:"cb91019f-7e63-4d3a-96a0-dc3f19482995","Content-Type":"application/json"},headersToken:{authorization:"cb91019f-7e63-4d3a-96a0-dc3f19482995"}}),O=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))};function T(e,t){return fetch(A.baseUrl+e,t).then(O)}var j=function(e){return T("/cards/".concat(e),{method:"DELETE",headers:A.headers,body:JSON.stringify({_id:e})})},B=function(e){return T("/cards/likes/".concat(e),{method:"PUT",headers:A.headers,body:JSON.stringify({_id:e})})},I=function(e){return T("/cards/likes/".concat(e),{method:"DELETE",headers:A.headers,body:JSON.stringify({_id:e})})};function P(e,t,n,o){var r=document.getElementById("card-template").content.querySelector(".card").cloneNode(!0),c=r.querySelector(".card__delete-button"),a=r.querySelector(".card__like-numbers"),i=r.querySelector(".card__image"),u=r.querySelector(".card__like-button");return i.src=e.link,i.alt=e.name,a.textContent=e.likes.length,r.querySelector(".card__title").textContent=e.name,u.addEventListener("click",(function(){u.classList.contains("card__like-button_is-active")?I(e._id).then((function(e){u.classList.toggle("card__like-button_is-active"),a.textContent=e.likes.length})).catch((function(e){console.log(e)})):B(e._id).then((function(e){u.classList.toggle("card__like-button_is-active"),a.textContent=e.likes.length})).catch((function(e){console.log(e)}))})),e.likes.forEach((function(e){e._id===o&&u.classList.toggle("card__like-button_is-active")})),o===e.owner._id&&(c.classList.remove("card__delete-button-hidden"),c.addEventListener("click",(function(){j(e._id).then((function(){t(r)})).catch((function(e){console.log(e)}))}))),i.addEventListener("click",(function(){n(f,e)})),r}function N(e){e.remove()}function J(e){e.classList.remove("popup_is-opened"),window.removeEventListener("keydown",M)}function D(e){e.classList.add("popup_is-opened"),window.addEventListener("keydown",M)}function M(e){"Escape"===e.key&&J(document.querySelector(".popup_is-opened"))}var U,H=function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),o.classList.remove(n.errorClass),o.textContent=""},z=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n.inactiveButtonClass)):(t.disabled=!0,t.classList.add(n.inactiveButtonClass))};function V(e,t){var n=e.querySelector(t.formSelector),o=Array.from(e.querySelectorAll(t.inputSelector)),r=Array.from(e.querySelectorAll(t.inputSelector)),c=e.querySelector(t.submitButtonSelector);o.forEach((function(n){H(e,n,t)})),z(r,c,t),n.reset()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function $(e,n,o,r){var c=P(e,n,o,r);t.prepend(c)}function F(e,t){v.src=t.link,v.alt=t.name,h.textContent=t.name,D(e)}c.addEventListener("click",(function(){V(b,g),D(b)})),q.addEventListener("click",(function(){V(E,g),D(E)})),r.addEventListener("click",(function(){V(_,g),y.value=n.textContent,m.value=o.textContent,D(_)})),a.addEventListener("submit",(function(e){e.preventDefault();var t,r,c=u.value,a=i.value;w.textContent="Сохранение...",(t=a,r=c,T("/users/me",{method:"PATCH",headers:A.headers,body:JSON.stringify({name:t,about:r})})).then((function(){n.textContent=a,o.textContent=c})).catch((function(e){console.log(e)})).finally((function(){V(S,g),w.textContent="Сохранить",J(S)}))})),d.addEventListener("submit",(function(e){e.preventDefault();var t,n,o=l.value,r=s.value;k.textContent="Сохранение...",(t=o,n=r,T("/cards",{method:"POST",headers:A.headers,body:JSON.stringify({name:t,link:n})})).then((function(e){$(e,N,F,e.owner._id),console.log(d)})).catch((function(e){console.log(e)})).finally((function(){V(b,g),k.textContent="Сохранить",J(b)}))})),C.addEventListener("submit",(function(e){var t;e.preventDefault(),x.textContent="Сохранение...",(t=L.value,T("/users/me/avatar",{method:"PATCH",headers:A.headers,body:JSON.stringify({avatar:t})})).then((function(e){q.style.backgroundImage="url('".concat(e.avatar,"')")})).catch((function(e){console.log(e)})).finally((function(){V(E,g),J(E),x.textContent="Сохранить"}))})),p.forEach((function(e){e.classList.add("popup_is-animated"),e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&J(e),t.target.classList.contains("popup__close")&&J(e),t.currentTarget===t.target&&J(e)}))})),U=g,Array.from(document.querySelectorAll(U.formSelector)).forEach((function(e){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);z(n,o,t),n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?H(e,t,n):function(e,t,n,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),r.textContent=n,r.classList.add(o.errorClass)}(e,t,t.validationMessage,n)}(e,r,t),z(n,o,t)}))}))}(e,U)})),Promise.all([T("/cards",{headers:A.headersToken}),T("/users/me",{headers:A.headersToken})]).then((function(e){var r,c,a=(c=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,c,a,i=[],u=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=c.call(n)).done)&&(i.push(o.value),i.length!==t);u=!0);}catch(e){l=!0,r=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return i}}(r,c)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(r,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],u=a[1];i.forEach((function(e){var n=P(e,N,F,u._id);t.append(n)})),n.textContent=u.name,o.textContent=u.about,q.style.backgroundImage="url('".concat(u.avatar,"')")})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWV4RyxFQUFZTCxjQUFjLElBQURpRCxPQUFLMkQsRUFBUUUsR0FBRSxXQUM3REYsRUFBUXZCLFVBQVVtQixJQUFJRSxFQUFTOUUsaUJBQy9CaUYsRUFBYTVCLFlBQWNtRSxFQUMzQnZDLEVBQWF4QixVQUFVbUIsSUFBSUUsRUFBUzdFLFdBQ3JDLENBaUJFd0gsQ0FDQ2hKLEVBQ0EySSxFQUNBQSxFQUFVTSxrQkFDVjVDLEVBS0gsQ0FVRzZDLENBQVFsSixFQUFhOEcsRUFBY1QsR0FDbkNLLEVBQWtCQyxFQUFXQyxFQUFlUCxFQUM3QyxHQUNELEdBQ0QsQ0FxQkU4QyxDQUFrQm5KLEVBQWFxRyxFQUNoQyxJQ2dCRDNELFFBQVEwRyxJQUFJLENKM0RKdEcsRUFBUSxTQUFVLENBQUNYLFFBQVNGLEVBQU9JLGVBSW5DUyxFQUFRLFlBQWEsQ0FBQ1gsUUFBU0YsRUFBT0ksaUJJd0Q3Q2EsTUFBSyxTQUFBbUcsR0FBc0IsSSxJQUFBQyxHLEVBQUEsRSw0Q0FBQUQsSSxvMkJBQXBCRSxFQUFLRCxFQUFBLEdBQUVFLEVBQU9GLEVBQUEsR0FDckJDLEVBQU1oRSxTQUFRLFNBQUExQixHQUNiLElBQU04QixFQUFPL0IsRUFBV0MsRUFBTUMsRUFBWUMsRUFBVXlGLEVBQVEvRixLQUM1RGhFLEVBQVdnSyxPQUFPOUQsRUFDbkIsSUFDQS9GLEVBQWFnRixZQUFjNEUsRUFBUTdFLEtBQ25DOUUsRUFBWStFLFlBQWM0RSxFQUFRekIsTUFDbEN0RyxFQUFjOEcsTUFBTUMsZ0JBQWtCLFFBQUg1RixPQUFXNEcsRUFBUWxCLE9BQU0sS0FDN0QsSUFDQ25ELE9BQU0sU0FBQUMsR0FDTkMsUUFBUUMsSUFBSUYsRUFDYixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy9tb2RhbC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbXBvbmVudHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy9mb3Jtcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKVxyXG5leHBvcnQgY29uc3QgcGxhY2VzID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VzJylcclxuZXhwb3J0IGNvbnN0IHBsYWNlc0xpc3QgPSBwbGFjZXMucXVlcnlTZWxlY3RvcignLnBsYWNlc19fbGlzdCcpXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKVxyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpXHJcbmV4cG9ydCBjb25zdCBuZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1snZWRpdC1wcm9maWxlJ11cclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJylcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gcHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihcclxuXHQnLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uJ1xyXG4pXHJcbmV4cG9ydCBjb25zdCBwbGFjZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0Jy5wb3B1cF9faW5wdXRfdHlwZV9jYXJkLW5hbWUnXHJcbilcclxuZXhwb3J0IGNvbnN0IHBsYWNlVXJsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfdXJsJylcclxuZXhwb3J0IGNvbnN0IGNhcmRGb3JtID0gcGxhY2VOYW1lSW5wdXQuY2xvc2VzdCgnLnBvcHVwX19mb3JtJylcclxuZXhwb3J0IGNvbnN0IHNhdmVCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19idXR0b24nKVxyXG5leHBvcnQgY29uc3QgYWxsUG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJylcclxuZXhwb3J0IGNvbnN0IGltYWdlUG9wdXBDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9pbWFnZScpXHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0JylcclxuZXhwb3J0IGNvbnN0IGZvcm1OYW1lID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJylcclxuZXhwb3J0IGNvbnN0IGZvcm1EZXNjID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoXHJcblx0Jy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbidcclxuKVxyXG5cclxuZXhwb3J0IGNvbnN0IGltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJylcclxuZXhwb3J0IGNvbnN0IGltYWdlVGl0bGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpXHJcbmV4cG9ydCBjb25zdCBuZXdDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9uZXctY2FyZCcpXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG5cdGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcblx0aW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG5cdHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG5cdGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uLWRpc2FibGVkJyxcclxuXHRpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcclxuXHRlcnJvckNsYXNzOiAnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJyxcclxufVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKVxyXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zWyduZXctYXZhdGFyJ11cclxuZXhwb3J0IGNvbnN0IGF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfbmV3LWF2YXRhcicpXHJcbmV4cG9ydCBjb25zdCBhdmF0YXJMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdCcucG9wdXBfX2lucHV0X3R5cGVfdXJsX2F2YXRhcidcclxuKVxyXG5leHBvcnQgY29uc3QgbmV3UGxhY2VCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LWNhcmQnKVxyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1wcm9maWxlJylcclxuZXhwb3J0IGNvbnN0IG5ld0F2YXRhckJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctYXZhdGFyJylcclxuZXhwb3J0IGNvbnN0IG5ld0NhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ25ldy1wbGFjZSddXHJcbiIsImNvbnN0IGNvbmZpZyA9IHtcclxuXHRiYXNlVXJsOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL3dmZi1jb2hvcnQtNycsXHJcblx0aGVhZGVyczoge1xyXG5cdFx0YXV0aG9yaXphdGlvbjogJ2NiOTEwMTlmLTdlNjMtNGQzYS05NmEwLWRjM2YxOTQ4Mjk5NScsXHJcblx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG5cdH0sXHJcblx0aGVhZGVyc1Rva2VuOiB7XHJcblx0XHRhdXRob3JpemF0aW9uOiAnY2I5MTAxOWYtN2U2My00ZDNhLTk2YTAtZGMzZjE5NDgyOTk1JyxcclxuXHR9LFxyXG59XHJcblxyXG5jb25zdCBjaGVja1Jlc3BvbnNlID0gcmVzID0+IHtcclxuXHRpZiAocmVzLm9rKSB7XHJcblx0XHRyZXR1cm4gcmVzLmpzb24oKVxyXG5cdH1cclxuXHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlcXVlc3QoZW5kcG9pbnQsIG9wdGlvbnMpIHtcclxuXHRyZXR1cm4gZmV0Y2goY29uZmlnLmJhc2VVcmwgKyBlbmRwb2ludCwgb3B0aW9ucylcclxuXHQudGhlbihjaGVja1Jlc3BvbnNlKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0Q2FyZHMgPSAoKSA9PiB7XHJcblx0cmV0dXJuIHJlcXVlc3QoJy9jYXJkcycsIHtoZWFkZXJzOiBjb25maWcuaGVhZGVyc1Rva2VufSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFByb2ZpbGUgPSAoKSA9PiB7XHJcblx0cmV0dXJuIHJlcXVlc3QoJy91c2Vycy9tZScsIHtoZWFkZXJzOiBjb25maWcuaGVhZGVyc1Rva2VufSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNoYW5nZVByb2ZpbGUgPSAobmFtZSwgYWJvdXQpID0+IHtcclxuXHRyZXR1cm4gcmVxdWVzdCgnL3VzZXJzL21lJywge1xyXG5cdFx0bWV0aG9kOiAnUEFUQ0gnLFxyXG5cdFx0aGVhZGVyczogY29uZmlnLmhlYWRlcnMsXHJcblx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdG5hbWU6IG5hbWUsXHJcblx0XHRcdGFib3V0OiBhYm91dCxcclxuXHRcdH0pXHJcblx0fSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhcmRBcGkgPSAobmFtZSwgbGluaykgPT4ge1xyXG5cdHJldHVybiByZXF1ZXN0KCcvY2FyZHMnLCB7XHJcblx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRuYW1lOiBuYW1lLFxyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0fSlcclxuXHR9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlQ2FyZEFwaSA9IGNhcmRJZCA9PiB7XHJcblx0cmV0dXJuIHJlcXVlc3QoYC9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcblx0XHRtZXRob2Q6ICdERUxFVEUnLFxyXG5cdFx0aGVhZGVyczogY29uZmlnLmhlYWRlcnMsXHJcblx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRcdF9pZDogY2FyZElkLFxyXG5cdFx0fSlcclxuXHR9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbGlrZUNhcmRBcGkgPSBjYXJkSWQgPT4ge1xyXG5cdHJldHVybiByZXF1ZXN0KGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG5cdFx0bWV0aG9kOiAnUFVUJyxcclxuXHRcdGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRfaWQ6IGNhcmRJZCxcclxuXHRcdH0pXHJcblx0fSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUxpa2VBcGkgPSBjYXJkSWQgPT4ge1xyXG5cdHJldHVybiByZXF1ZXN0KGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG5cdFx0bWV0aG9kOiAnREVMRVRFJyxcclxuXHRcdGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRfaWQ6IGNhcmRJZCxcclxuXHRcdH0pLFxyXG5cdH0pXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVBdmF0YXIgPSBhdmF0YXJMaW5rID0+IHtcclxuXHRyZXR1cm4gcmVxdWVzdCgnL3VzZXJzL21lL2F2YXRhcicsIHtcclxuXHRcdG1ldGhvZDogJ1BBVENIJyxcclxuXHRcdGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRhdmF0YXI6IGF2YXRhckxpbmssXHJcblx0XHR9KSxcclxuXHR9KVxyXG59XHJcbiIsImltcG9ydCB7IGltYWdlUG9wdXBDb250YWluZXIgfSBmcm9tICcuL2NvbnN0YW50cydcclxuXHJcbmltcG9ydCB7IGRlbGV0ZUNhcmRBcGksIGRlbGV0ZUxpa2VBcGksIGxpa2VDYXJkQXBpIH0gZnJvbSAnLi9hcGknXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtLCBkZWxldGVDYXJkLCBvcGVuQ2FyZCwgdXNlcklkKSB7XHJcblx0Y29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQtdGVtcGxhdGUnKS5jb250ZW50XHJcblx0Y29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSlcclxuXHRjb25zdCBkZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpXHJcblx0Y29uc3QgbGlrZXNOdW1iZXIgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1udW1iZXJzJylcclxuXHRjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKVxyXG5cdGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKVxyXG5cdGNhcmRJbWFnZS5zcmMgPSBpdGVtLmxpbmtcclxuXHRjYXJkSW1hZ2UuYWx0ID0gaXRlbS5uYW1lXHJcblx0bGlrZXNOdW1iZXIudGV4dENvbnRlbnQgPSBpdGVtLmxpa2VzLmxlbmd0aFxyXG5cclxuXHRjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZVxyXG5cdGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRpZiAobGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZScpKSB7XHJcblx0XHRcdGRlbGV0ZUxpa2VBcGkoaXRlbS5faWQpXHJcblx0XHRcdC50aGVuKHJlcyA9PiB7XHJcblx0XHRcdFx0bGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmUnKVxyXG5cdFx0XHRcdGxpa2VzTnVtYmVyLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aFxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY2F0Y2goZXJyID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpXHJcblx0XHRcdH0pXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRsaWtlQ2FyZEFwaShpdGVtLl9pZClcclxuXHRcdFx0LnRoZW4ocmVzID0+IHtcclxuXHRcdFx0XHRsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZScpXHJcblx0XHRcdFx0bGlrZXNOdW1iZXIudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoXHJcblx0XHRcdH0pXHJcblx0XHRcdC5jYXRjaChlcnIgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycilcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHR9KVxyXG5cclxuXHRjb25zdCByZW1vdmVCdXR0b25DbGljayA9ICgpID0+IHtcclxuXHRcdGRlbGV0ZUNhcmRBcGkoaXRlbS5faWQpXHJcblx0XHQudGhlbigoKSA9PiB7XHJcblx0XHRcdGRlbGV0ZUNhcmQoY2FyZEVsZW1lbnQpXHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGVyciA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGVycilcclxuXHRcdH0pXHJcblx0fVxyXG5cdGl0ZW0ubGlrZXMuZm9yRWFjaChsaWtlID0+IHtcclxuXHRcdGlmIChsaWtlLl9pZCA9PT0gdXNlcklkKSB7XHJcblx0XHRcdGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS1idXR0b25faXMtYWN0aXZlJylcclxuXHRcdH1cclxuXHR9KVxyXG5cclxuXHRpZiAodXNlcklkID09PSBpdGVtLm93bmVyLl9pZCkge1xyXG5cdFx0ZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2RlbGV0ZS1idXR0b24taGlkZGVuJylcclxuXHRcdGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbW92ZUJ1dHRvbkNsaWNrKVxyXG5cdH1cclxuXHRjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRvcGVuQ2FyZChpbWFnZVBvcHVwQ29udGFpbmVyLCBpdGVtKVxyXG5cdH0pXHJcblxyXG5cdHJldHVybiBjYXJkRWxlbWVudFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ2FyZChjYXJkKSB7XHJcblx0Y2FyZC5yZW1vdmUoKVxyXG59XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBjbG9zZVBvcHVwIChvcGVuZWRQb3B1cCkge1xyXG5cdG9wZW5lZFBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2lzLW9wZW5lZCcpXHJcblx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlc2NhcGVIYW5kbGVyKVx0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuUG9wdXAgKHBvcHVwKSB7XHJcblx0cG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfaXMtb3BlbmVkJylcclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVzY2FwZUhhbmRsZXIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVzY2FwZUhhbmRsZXIoZXZ0KSB7XHJcblx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRjb25zdCBvcGVuZWRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9pcy1vcGVuZWQnKVxyXG5cdCAgY2xvc2VQb3B1cChvcGVuZWRQb3B1cClcclxuXHR9XHJcbn0iLCJjb25zdCBzaG93SW5wdXRFcnJvciA9IChwcm9maWxlRm9ybSwgZWxlbWVudCwgZXJyb3JNZXNzYWdlLCBzZXR0aW5ncykgPT4ge1xyXG5cdGNvbnN0IGVycm9yRWxlbWVudCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2VsZW1lbnQuaWR9LWVycm9yYClcclxuXHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKVxyXG5cdGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZVxyXG5cdGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmVycm9yQ2xhc3MpXHJcbn1cclxuXHJcbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKHByb2ZpbGVGb3JtLCBlbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG5cdGNvbnN0IGVycm9yRWxlbWVudCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2VsZW1lbnQuaWR9LWVycm9yYClcclxuXHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKVxyXG5cdGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNldHRpbmdzLmVycm9yQ2xhc3MpXHJcblx0ZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJydcclxufVxyXG5cclxuY29uc3QgaXNWYWxpZCA9IChwcm9maWxlRm9ybSwgZm9ybUlucHV0LCBzZXR0aW5ncykgPT4ge1xyXG5cdGlmIChmb3JtSW5wdXQudmFsaWRpdHkucGF0dGVybk1pc21hdGNoKSB7XHJcblx0XHRmb3JtSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoZm9ybUlucHV0LmRhdGFzZXQuZXJyb3JNZXNzYWdlKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRmb3JtSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpXHJcblx0fVxyXG5cclxuXHRpZiAoIWZvcm1JbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG5cdFx0c2hvd0lucHV0RXJyb3IoXHJcblx0XHRcdHByb2ZpbGVGb3JtLFxyXG5cdFx0XHRmb3JtSW5wdXQsXHJcblx0XHRcdGZvcm1JbnB1dC52YWxpZGF0aW9uTWVzc2FnZSxcclxuXHRcdFx0c2V0dGluZ3NcclxuXHRcdClcclxuXHR9IGVsc2Uge1xyXG5cdFx0aGlkZUlucHV0RXJyb3IocHJvZmlsZUZvcm0sIGZvcm1JbnB1dCwgc2V0dGluZ3MpXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChwcm9maWxlRm9ybSwgc2V0dGluZ3MpID0+IHtcclxuXHRjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG5cdFx0cHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG5cdClcclxuXHRjb25zdCBidXR0b25FbGVtZW50ID0gcHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuXHR0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKVxyXG5cdGlucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XHJcblx0XHRpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcblx0XHRcdGlzVmFsaWQocHJvZmlsZUZvcm0sIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpXHJcblx0XHRcdHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpXHJcblx0XHR9KVxyXG5cdH0pXHJcbn1cclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IGlucHV0TGlzdCA9PiB7XHJcblx0cmV0dXJuIGlucHV0TGlzdC5zb21lKGlucHV0RWxlbWVudCA9PiB7XHJcblx0XHRyZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG5cdH0pXHJcbn1cclxuXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuXHRpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuXHRcdGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlXHJcblx0XHRidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcylcclxuXHR9IGVsc2Uge1xyXG5cdFx0YnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlXHJcblx0XHRidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcylcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gc2V0dGluZ3MgPT4ge1xyXG5cdGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmZvcm1TZWxlY3RvcikpXHJcblx0Zm9ybUxpc3QuZm9yRWFjaChwcm9maWxlRm9ybSA9PiB7XHJcblx0XHRzZXRFdmVudExpc3RlbmVycyhwcm9maWxlRm9ybSwgc2V0dGluZ3MpXHJcblx0fSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyVmFsaWRhdGlvbihmb3JtQ29udGFpbmVyLCBzZXR0aW5ncykge1xyXG5cdGNvbnN0IGZvcm1FbGVtZW50ID0gZm9ybUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLmZvcm1TZWxlY3RvcilcclxuXHRjb25zdCBpbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuXHRcdGZvcm1Db250YWluZXIucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG5cdClcclxuXHRjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG5cdFx0Zm9ybUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcblx0KVxyXG5cdGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpXHJcblx0aW5wdXRFbGVtZW50cy5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XHJcblx0XHRoaWRlSW5wdXRFcnJvcihmb3JtQ29udGFpbmVyLCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKVxyXG5cdH0pXHJcblx0dG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBzZXR0aW5ncylcclxuXHRmb3JtRWxlbWVudC5yZXNldCgpXHJcbn1cclxuIiwiaW1wb3J0IHsgY3JlYXRlQ2FyZCwgZGVsZXRlQ2FyZCB9IGZyb20gJy4vY29tcG9uZW50cy9jYXJkLmpzJ1xyXG5pbXBvcnQge1xyXG5cdGFsbFBvcHVwcyxcclxuXHRhdmF0YXJGb3JtLFxyXG5cdGF2YXRhclBvcHVwLFxyXG5cdGNhcmRGb3JtLFxyXG5cdGVkaXRCdXR0b24sXHJcblx0Zm9ybURlc2MsXHJcblx0Zm9ybU5hbWUsXHJcblx0aW1hZ2VQb3B1cCxcclxuXHRpbWFnZVRpdGxlUG9wdXAsXHJcblx0bmV3Q2FyZEJ1dHRvbixcclxuXHRuZXdDYXJkUG9wdXAsXHJcblx0cGxhY2VzTGlzdCxcclxuXHRwb3B1cEVkaXQsXHJcblx0cHJvZmlsZUF2YXRhcixcclxuXHRwcm9maWxlRGVzYyxcclxuXHRwcm9maWxlRm9ybSxcclxuXHRwcm9maWxlVGl0bGUsXHJcblx0dmFsaWRhdGlvbkNvbmZpZyxcclxufSBmcm9tICcuL2NvbXBvbmVudHMvY29uc3RhbnRzLmpzJ1xyXG5pbXBvcnQge1xyXG5cdGhhbmRsZUZvcm1DcmVhdGUsXHJcblx0aGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQsXHJcblx0aGFuZGxlQXZhdGFyRWRpdFxyXG59IGZyb20gJy4vY29tcG9uZW50cy9mb3Jtcy5qcydcclxuaW1wb3J0ICcuL3BhZ2VzL2luZGV4LmNzcydcclxuXHJcbmltcG9ydCB7IGNsb3NlUG9wdXAsIG9wZW5Qb3B1cCB9IGZyb20gJy4vY29tcG9uZW50cy9tb2RhbC5qcydcclxuXHJcbmltcG9ydCB7IGNsZWFyVmFsaWRhdGlvbiwgZW5hYmxlVmFsaWRhdGlvbiB9IGZyb20gJy4vY29tcG9uZW50cy92YWxpZGF0aW9uLmpzJ1xyXG5cclxuaW1wb3J0IHsgZ2V0Q2FyZHMsIGdldFByb2ZpbGUgfSBmcm9tICcuL2NvbXBvbmVudHMvYXBpLmpzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZENhcmQoaXRlbSwgZGVsZXRlQ2FyZCwgb3BlbkNhcmQsIHVzZXJJZCkge1xyXG5cdGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtLCBkZWxldGVDYXJkLCBvcGVuQ2FyZCwgdXNlcklkKVxyXG5cdHBsYWNlc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5DYXJkKGltYWdlQ29udCwgY2FyZCkge1xyXG5cdGltYWdlUG9wdXAuc3JjID0gY2FyZC5saW5rXHJcblx0aW1hZ2VQb3B1cC5hbHQgPSBjYXJkLm5hbWVcclxuXHRpbWFnZVRpdGxlUG9wdXAudGV4dENvbnRlbnQgPSBjYXJkLm5hbWVcclxuXHRvcGVuUG9wdXAoaW1hZ2VDb250KVxyXG59XHJcblxyXG5uZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cdGNsZWFyVmFsaWRhdGlvbihuZXdDYXJkUG9wdXAsIHZhbGlkYXRpb25Db25maWcpXHJcblx0b3BlblBvcHVwKG5ld0NhcmRQb3B1cClcclxufSlcclxucHJvZmlsZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjbGVhclZhbGlkYXRpb24oYXZhdGFyUG9wdXAsIHZhbGlkYXRpb25Db25maWcpXHJcblx0b3BlblBvcHVwKGF2YXRhclBvcHVwKVxyXG59KVxyXG5cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHRjbGVhclZhbGlkYXRpb24ocG9wdXBFZGl0LCB2YWxpZGF0aW9uQ29uZmlnKVxyXG5cdGZvcm1OYW1lLnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50XHJcblx0Zm9ybURlc2MudmFsdWUgPSBwcm9maWxlRGVzYy50ZXh0Q29udGVudFxyXG5cdG9wZW5Qb3B1cChwb3B1cEVkaXQpXHJcbn0pXHJcblxyXG5wcm9maWxlRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdClcclxuY2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlRm9ybUNyZWF0ZSlcclxuYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVBdmF0YXJFZGl0KVxyXG5cclxuYWxsUG9wdXBzLmZvckVhY2goKHBvcHVwKSA9PiB7XHJcblx0cG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfaXMtYW5pbWF0ZWQnKVxyXG5cdHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuXHRcdFx0aWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xyXG5cdFx0XHRcdFx0Y2xvc2VQb3B1cChwb3B1cClcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XHJcblx0XHRcdFx0Y2xvc2VQb3B1cChwb3B1cClcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZXZ0LmN1cnJlbnRUYXJnZXQgPT09IGV2dC50YXJnZXQpIHtcclxuXHRcdFx0XHRjbG9zZVBvcHVwKHBvcHVwKVxyXG5cdFx0XHR9XHJcblx0fSlcclxufSlcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZylcclxuXHJcblByb21pc2UuYWxsKFtnZXRDYXJkcygpLCBnZXRQcm9maWxlKCldKVxyXG4udGhlbigoW2NhcmRzLCBwcm9maWxlXSkgPT4ge1xyXG5cdGNhcmRzLmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtLCBkZWxldGVDYXJkLCBvcGVuQ2FyZCwgcHJvZmlsZS5faWQpXHJcblx0XHRwbGFjZXNMaXN0LmFwcGVuZChjYXJkKVxyXG5cdH0pXHJcblx0cHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gcHJvZmlsZS5uYW1lXHJcblx0cHJvZmlsZURlc2MudGV4dENvbnRlbnQgPSBwcm9maWxlLmFib3V0XHJcblx0cHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke3Byb2ZpbGUuYXZhdGFyfScpYFxyXG59KVxyXG4uY2F0Y2goZXJyID0+IHtcclxuXHRjb25zb2xlLmxvZyhlcnIpXHJcbn0pXHJcblxyXG4iLCJpbXBvcnQgeyBhZGRDYXJkLCBvcGVuQ2FyZCB9IGZyb20gJy4uL2luZGV4LmpzJ1xyXG5pbXBvcnQgeyBjaGFuZ2VQcm9maWxlLCBjcmVhdGVDYXJkQXBpLCB1cGRhdGVBdmF0YXIgfSBmcm9tICcuL2FwaS5qcydcclxuaW1wb3J0IHsgZGVsZXRlQ2FyZCB9IGZyb20gJy4vY2FyZCdcclxuaW1wb3J0IHtcclxuXHRjYXJkRm9ybSxcclxuXHRlZGl0UHJvZmlsZUJ1dHRvbixcclxuXHRqb2JJbnB1dCxcclxuXHRuYW1lSW5wdXQsXHJcblx0bmV3Q2FyZFBvcHVwLFxyXG5cdG5ld1BsYWNlQnV0dG9uLFxyXG5cdHBsYWNlTmFtZUlucHV0LFxyXG5cdHBsYWNlVXJsSW5wdXQsXHJcblx0cHJvZmlsZURlc2MsXHJcblx0cHJvZmlsZUVkaXRQb3B1cCxcclxuXHRwcm9maWxlVGl0bGUsXHJcblx0dmFsaWRhdGlvbkNvbmZpZyxcclxuIFx0bmV3QXZhdGFyQnV0dG9uLFxyXG5cdHByb2ZpbGVBdmF0YXIsXHJcblx0YXZhdGFyTGlua0lucHV0LFxyXG5cdGF2YXRhclBvcHVwfSBmcm9tICcuL2NvbnN0YW50cydcclxuaW1wb3J0IHsgY2xvc2VQb3B1cCB9IGZyb20gJy4vbW9kYWwuanMnXHJcbmltcG9ydCB7IGNsZWFyVmFsaWRhdGlvbiB9IGZyb20gJy4vdmFsaWRhdGlvbi5qcydcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHtcclxuXHRldnQucHJldmVudERlZmF1bHQoKVxyXG5cdGNvbnN0IGpvYlZhbHVlID0gam9iSW5wdXQudmFsdWVcclxuXHRjb25zdCBuYW1lVmFsdWUgPSBuYW1lSW5wdXQudmFsdWVcclxuXHRlZGl0UHJvZmlsZUJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLidcclxuXHRjaGFuZ2VQcm9maWxlKG5hbWVWYWx1ZSwgam9iVmFsdWUpXHJcblx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0cHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZVZhbHVlXHJcblx0XHRwcm9maWxlRGVzYy50ZXh0Q29udGVudCA9IGpvYlZhbHVlXHJcblx0fSlcclxuXHQuY2F0Y2goZXJyID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKGVycilcclxuXHR9KVxyXG5cdC5maW5hbGx5KCgpID0+IHtcclxuXHRcdGNsZWFyVmFsaWRhdGlvbihwcm9maWxlRWRpdFBvcHVwLCB2YWxpZGF0aW9uQ29uZmlnKVxyXG5cdFx0ZWRpdFByb2ZpbGVCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJ1xyXG5cdFx0Y2xvc2VQb3B1cChwcm9maWxlRWRpdFBvcHVwKVxyXG5cdH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVGb3JtQ3JlYXRlKGV2dCkge1xyXG5cdGV2dC5wcmV2ZW50RGVmYXVsdCgpXHJcblx0Y29uc3QgcGxhY2VOYW1lVmFsdWUgPSBwbGFjZU5hbWVJbnB1dC52YWx1ZVxyXG5cdGNvbnN0IHBsYWNlVXJsVmFsdWUgPSBwbGFjZVVybElucHV0LnZhbHVlXHJcblx0bmV3UGxhY2VCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXHJcblx0Y3JlYXRlQ2FyZEFwaShwbGFjZU5hbWVWYWx1ZSwgcGxhY2VVcmxWYWx1ZSlcclxuXHRcdC50aGVuKHJlcyA9PiB7XHJcblx0XHRcdGFkZENhcmQocmVzLCBkZWxldGVDYXJkLCBvcGVuQ2FyZCwgcmVzLm93bmVyLl9pZClcclxuXHRcdFx0Y29uc29sZS5sb2coY2FyZEZvcm0pXHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGVyciA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGVycilcclxuXHRcdH0pXHJcblx0XHQuZmluYWxseSgoKSA9PiB7XHJcblx0XHRcdGNsZWFyVmFsaWRhdGlvbihuZXdDYXJkUG9wdXAsIHZhbGlkYXRpb25Db25maWcpXHJcblx0XHRcdG5ld1BsYWNlQnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCdcclxuXHRcdFx0Y2xvc2VQb3B1cChuZXdDYXJkUG9wdXApXHJcblx0XHR9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlQXZhdGFyRWRpdChldnQpIHtcclxuXHR7XHJcblx0XHRldnQucHJldmVudERlZmF1bHQoKVxyXG5cdFx0bmV3QXZhdGFyQnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJ1xyXG5cdFx0dXBkYXRlQXZhdGFyKGF2YXRhckxpbmtJbnB1dC52YWx1ZSlcclxuXHRcdFx0LnRoZW4ocmVzID0+IHtcclxuXHRcdFx0XHRwcm9maWxlQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7cmVzLmF2YXRhcn0nKWBcclxuXHRcdFx0fSlcclxuXHRcdFx0LmNhdGNoKGVyciA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyKVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuZmluYWxseSgoKSA9PiB7XHJcblx0XHRcdFx0Y2xlYXJWYWxpZGF0aW9uKGF2YXRhclBvcHVwLCB2YWxpZGF0aW9uQ29uZmlnKVxyXG5cdFx0XHRcdGNsb3NlUG9wdXAoYXZhdGFyUG9wdXApXHJcblx0XHRcdFx0bmV3QXZhdGFyQnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCdcclxuXHRcdFx0fSlcclxuXHR9XHJcbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwbGFjZXNMaXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2MiLCJlZGl0QnV0dG9uIiwibmV3Q2FyZEJ1dHRvbiIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInBsYWNlTmFtZUlucHV0IiwicGxhY2VVcmxJbnB1dCIsImNhcmRGb3JtIiwiY2xvc2VzdCIsImFsbFBvcHVwcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbWFnZVBvcHVwQ29udGFpbmVyIiwicG9wdXBFZGl0IiwiZm9ybU5hbWUiLCJmb3JtRGVzYyIsImltYWdlUG9wdXAiLCJpbWFnZVRpdGxlUG9wdXAiLCJwcm9maWxlRWRpdFBvcHVwIiwibmV3Q2FyZFBvcHVwIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZmlsZUF2YXRhciIsImF2YXRhckZvcm0iLCJhdmF0YXJQb3B1cCIsImF2YXRhckxpbmtJbnB1dCIsIm5ld1BsYWNlQnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsIm5ld0F2YXRhckJ1dHRvbiIsImNvbmZpZyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImhlYWRlcnNUb2tlbiIsImNoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiY29uY2F0Iiwic3RhdHVzIiwicmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsImZldGNoIiwidGhlbiIsImRlbGV0ZUNhcmRBcGkiLCJjYXJkSWQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIl9pZCIsImxpa2VDYXJkQXBpIiwiZGVsZXRlTGlrZUFwaSIsImNyZWF0ZUNhcmQiLCJpdGVtIiwiZGVsZXRlQ2FyZCIsIm9wZW5DYXJkIiwidXNlcklkIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZGVsZXRlQnV0dG9uIiwibGlrZXNOdW1iZXIiLCJjYXJkSW1hZ2UiLCJsaWtlQnV0dG9uIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsImxpa2VzIiwibGVuZ3RoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidG9nZ2xlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZm9yRWFjaCIsImxpa2UiLCJvd25lciIsInJlbW92ZSIsImNhcmQiLCJjbG9zZVBvcHVwIiwib3BlbmVkUG9wdXAiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXNjYXBlSGFuZGxlciIsIm9wZW5Qb3B1cCIsInBvcHVwIiwiYWRkIiwiZXZ0Iiwic2V0dGluZ3MiLCJoaWRlSW5wdXRFcnJvciIsImVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJjbGVhclZhbGlkYXRpb24iLCJmb3JtQ29udGFpbmVyIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwicmVzZXQiLCJhZGRDYXJkIiwicHJlcGVuZCIsImltYWdlQ29udCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJhYm91dCIsImpvYlZhbHVlIiwibmFtZVZhbHVlIiwiZmluYWxseSIsInBsYWNlTmFtZVZhbHVlIiwicGxhY2VVcmxWYWx1ZSIsImF2YXRhckxpbmsiLCJhdmF0YXIiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJmb3JtSW5wdXQiLCJwYXR0ZXJuTWlzbWF0Y2giLCJzZXRDdXN0b21WYWxpZGl0eSIsImRhdGFzZXQiLCJlcnJvck1lc3NhZ2UiLCJzaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaXNWYWxpZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWxsIiwiX3JlZiIsIl9yZWYyIiwiY2FyZHMiLCJwcm9maWxlIiwiYXBwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==