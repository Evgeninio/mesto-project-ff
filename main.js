(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Z:()=>$,H:()=>F});var t=document.querySelector(".content").querySelector(".places").querySelector(".places__list"),n=document.querySelector(".profile__title"),r=document.querySelector(".profile__description"),o=document.querySelector(".profile__edit-button"),c=document.querySelector(".profile__add-button"),a=document.querySelectorAll(".popup__close"),u=document.querySelector(".popup__form"),i=u.querySelector(".popup__input_type_name"),l=u.querySelector(".popup__input_type_description"),s=document.querySelector(".popup__input_type_card-name"),d=document.querySelector(".popup__input_type_url"),p=s.closest(".popup__form"),f=(document.querySelectorAll(".popup__button"),document.querySelectorAll(".popup")),_=document.querySelector(".popup_type_image"),y=document.querySelector(".popup_type_edit"),m=y.querySelector(".popup__input_type_name"),h=y.querySelector(".popup__input_type_description"),v=document.querySelector(".popup__image"),S=document.querySelector(".popup__caption"),b=document.querySelector(".popup_type_edit"),g=document.querySelector(".popup_type_new-card"),q={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button-disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},E=document.querySelector(".profile__avatar"),C=document.forms["new-avatar"],k=document.querySelector(".popup_type_new-avatar"),L=document.querySelector(".popup__input_type_url_avatar"),x=document.getElementById("new-card"),w=document.getElementById("edit-profile"),A=document.getElementById("new-avatar"),O={baseUrl:"https://nomoreparties.co/v1/wff-cohort-7",headers:{authorization:"cb91019f-7e63-4d3a-96a0-dc3f19482995","Content-Type":"application/json"},headersToken:{authorization:"cb91019f-7e63-4d3a-96a0-dc3f19482995"}},T=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},U=function(e){return fetch("".concat(O.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:O.headers,body:JSON.stringify({_id:e})}).then((function(e){return T(e)})).catch((function(e){console.log(e)}))},j=function(e){return fetch("".concat(O.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:O.headers,body:JSON.stringify({_id:e})}).then((function(e){return T(e)})).catch((function(e){console.log(e)}))},B=function(e){return fetch("".concat(O.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:O.headers,body:JSON.stringify({_id:e})}).then((function(e){return T(e)})).catch((function(e){console.log(e)}))};function I(e,t,n,r){var o=document.getElementById("card-template").content.querySelector(".card").cloneNode(!0),c=o.querySelector(".card__delete-button"),a=o.querySelector(".card__like-numbers"),u=o.querySelector(".card__image"),i=o.querySelector(".card__like-button");return u.src=e.link,u.alt=e.name,a.textContent=e.likes.length,o.querySelector(".card__title").textContent=e.name,i.addEventListener("click",(function(){i.classList.contains("card__like-button_is-active")?B(e._id).then((function(e){i.classList.toggle("card__like-button_is-active"),a.textContent=e.likes.length})):j(e._id).then((function(e){i.classList.toggle("card__like-button_is-active"),a.textContent=e.likes.length}))})),e.likes.forEach((function(e){e._id===r&&i.classList.toggle("card__like-button_is-active")})),r===e.owner._id&&(c.classList.remove("card__delete-button-hidden"),c.addEventListener("click",(function(){t(o),U(e._id)}))),u.addEventListener("click",(function(){n(_,e)})),o}function P(e){e.remove()}function N(e){e.classList.remove("popup_is-opened"),window.removeEventListener("keydown",D)}function J(e){e.classList.add("popup_is-opened"),window.addEventListener("keydown",D)}function D(e){"Escape"===e.key&&N(document.querySelector(".popup_is-opened"))}var H,M=function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass),r.textContent=""},z=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n.inactiveButtonClass)):(t.disabled=!0,t.classList.add(n.inactiveButtonClass))};function V(e,t){var n=e.querySelector(".popup__form");Array.from(e.querySelectorAll(t.inputSelector)).forEach((function(n){M(e,n,t)})),n.reset()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,n,r,o){var c=I(e,n,r,o);t.prepend(c)}function F(e,t){v.src=t.link,v.alt=t.name,S.textContent=t.name,J(e)}c.addEventListener("click",(function(){V(g,q),J(g)})),o.addEventListener("click",(function(){V(y,q),m.value=n.textContent,h.value=r.textContent,J(y)})),a.forEach((function(e){return e.addEventListener("click",(function(){N(e.closest(".popup"))}))})),u.addEventListener("submit",(function(e){e.preventDefault();var t,o,c=l.value,a=i.value;w.textContent="Сохранение...",(t=a,o=c,fetch("".concat(O.baseUrl,"/users/me"),{method:"PATCH",headers:O.headers,body:JSON.stringify({name:t,about:o})}).then((function(e){return T(e)})).catch((function(e){console.log(e)}))).finally((function(){n.textContent=a,r.textContent=c,N(b),w.textContent="Сохранить"}))})),p.addEventListener("submit",(function(e){e.preventDefault();var t,n,r=s.value,o=d.value;x.textContent="Сохранение...",(t=r,n=o,fetch("".concat(O.baseUrl,"/cards"),{method:"POST",headers:O.headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return T(e)})).catch((function(e){console.log(e)}))).then((function(e){$(e,P,F,e.owner._id),p.reset()})).finally((function(){x.textContent="Сохранить",N(g)}))})),f.forEach((function(e){return e.addEventListener("click",(function(t){t.currentTarget===t.target&&N(e)}))})),f.forEach((function(e){return e.classList.add("popup_is-animated")})),H=q,Array.from(document.querySelectorAll(H.formSelector)).forEach((function(e){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);z(n,r,t),n.forEach((function(o){o.addEventListener("input",(function(){!function(e,t,n){t.validity.patternMismatch?t.setCustomValidity("Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы"):t.setCustomValidity(""),t.validity.valid?M(e,t,n):function(e,t,n,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClass)}(e,t,t.validationMessage,n)}(e,o,t),z(n,r,t)}))}))}(e,H)})),Promise.all([fetch("".concat(O.baseUrl,"/cards"),{headers:O.headersToken}).then((function(e){return T(e)})).catch((function(e){console.log(e)})),fetch("".concat(O.baseUrl,"/users/me"),{headers:O.headersToken}).then((function(e){return T(e)})).catch((function(e){console.log(e)}))]).then((function(e){var o,c,a=(c=2,function(e){if(Array.isArray(e))return e}(o=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,u=[],i=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(o,c)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(o,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[0],i=a[1];u.forEach((function(e){var n=I(e,P,F,i._id);t.append(n)})),n.textContent=i.name,r.textContent=i.about,E.style.backgroundImage="url('".concat(i.avatar,"')"),E.addEventListener("click",(function(){J(k)})),C.addEventListener("submit",(function(e){var t;e.preventDefault(),A.textContent="Сохранение...",(t=L.value,fetch("".concat(O.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:O.headers,body:JSON.stringify({avatar:t})}).then((function(e){return T(e)})).catch((function(e){console.log(e)}))).then((function(e){E.style.backgroundImage="url('".concat(e.avatar,"')"),N(k),A.textContent="Сохранить"}))}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akJLLEVBQWdCNkMsWUFBYyxXQUMxQixHQUNULEdBZkQsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21lc3RvLXByb2plY3QtZmYvLi9zcmMvY29tcG9uZW50cy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL2FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbXBvbmVudHMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9jb21wb25lbnRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL2NvbXBvbmVudHMvZm9ybXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JylcclxuZXhwb3J0IGNvbnN0IHBsYWNlcyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnBsYWNlcycpXHJcbmV4cG9ydCBjb25zdCBwbGFjZXNMaXN0ID0gcGxhY2VzLnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZXNfX2xpc3QnKVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJylcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJylcclxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKVxyXG5leHBvcnQgY29uc3QgbmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJylcclxuZXhwb3J0IGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19jbG9zZScpXHJcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpXHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpXHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbicpXHJcbmV4cG9ydCBjb25zdCBwbGFjZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9jYXJkLW5hbWUnKVxyXG5leHBvcnQgY29uc3QgcGxhY2VVcmxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV91cmwnKVxyXG5leHBvcnQgY29uc3QgY2FyZEZvcm0gPSBwbGFjZU5hbWVJbnB1dC5jbG9zZXN0KCcucG9wdXBfX2Zvcm0nKVxyXG5leHBvcnQgY29uc3Qgc2F2ZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2J1dHRvbicpXHJcbmV4cG9ydCBjb25zdCBhbGxQb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAnKVxyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2ltYWdlJylcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKVxyXG5leHBvcnQgY29uc3QgZm9ybU5hbWUgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKVxyXG5leHBvcnQgY29uc3QgZm9ybURlc2MgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uJylcclxuXHJcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpXHJcbmV4cG9ydCBjb25zdCBpbWFnZVRpdGxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKVxyXG5leHBvcnQgY29uc3QgbmV3Q2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfbmV3LWNhcmQnKVxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbi1kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZSdcclxufVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm0gPSBkb2N1bWVudC5mb3Jtc1snbmV3LWF2YXRhciddO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9uZXctYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfdXJsX2F2YXRhcicpXHJcbmV4cG9ydCBjb25zdCBuZXdQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctY2FyZCcpXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXByb2ZpbGUnKVxyXG5leHBvcnQgY29uc3QgbmV3QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1hdmF0YXInKSIsImNvbnN0IGNvbmZpZyA9IHtcclxuICBiYXNlVXJsOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL3dmZi1jb2hvcnQtNycsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJ2NiOTEwMTlmLTdlNjMtNGQzYS05NmEwLWRjM2YxOTQ4Mjk5NScsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgfSxcclxuXHRoZWFkZXJzVG9rZW46e1xyXG5cdFx0YXV0aG9yaXphdGlvbjogJ2NiOTEwMTlmLTdlNjMtNGQzYS05NmEwLWRjM2YxOTQ4Mjk5NSdcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrUmVzcG9uc2UgPSAocmVzKSA9PiB7XHJcblx0aWYgKHJlcy5vaykge1xyXG5cdFx0cmV0dXJuIHJlcy5qc29uKCk7XHJcblx0fVxyXG5cdHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzZXJ2ZXJDYXJkcyA9ICgpID0+IHtcclxuXHRyZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzYCwge1xyXG5cdFx0aGVhZGVyczogY29uZmlnLmhlYWRlcnNUb2tlblxyXG5cdH0pXHJcblx0XHQudGhlbihyZXMgPT4gY2hlY2tSZXNwb25zZShyZXMpKVxyXG5cdFx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdFx0Y29uc29sZS5sb2coZXJyKVxyXG5cdFx0fSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldFByb2ZpbGU9ICgpID0+IHtcclxuXHRyZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG5cdFx0aGVhZGVyczogY29uZmlnLmhlYWRlcnNUb2tlblxyXG5cdH0pXHJcblx0XHQudGhlbihyZXMgPT4gY2hlY2tSZXNwb25zZShyZXMpKVxyXG5cdFx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdFx0Y29uc29sZS5sb2coZXJyKVxyXG5cdFx0fSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNoYW5nZVByb2ZpbGUgPSAobmFtZSwgYWJvdXQpID0+IHtcclxuXHRyZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gIG1ldGhvZDogJ1BBVENIJyxcclxuICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcblx0XHRuYW1lOiBuYW1lLFxyXG4gICAgYWJvdXQ6IGFib3V0XHJcblx0fSlcclxufSlcclxuXHQudGhlbihyZXMgPT4gY2hlY2tSZXNwb25zZShyZXMpKVxyXG5cdC5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyhlcnIpXHJcblx0fSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRDcmVhdGVBcGkgPSAobmFtZSwgbGluaykgPT4ge1xyXG5cdHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXHJcbiAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0bmFtZTogbmFtZSxcclxuICAgIGxpbms6IGxpbmtcclxuXHR9KVxyXG59KVxyXG5cdC50aGVuKHJlcyA9PiBjaGVja1Jlc3BvbnNlKHJlcykpXHJcblx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKGVycilcclxuXHR9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZERlbGV0ZUFwaSA9IChjYXJkSWQpID0+IHtcclxuXHRyZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG4gIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdF9pZDogY2FyZElkXHJcblx0fSlcclxufSlcclxuXHQudGhlbihyZXMgPT4gY2hlY2tSZXNwb25zZShyZXMpKVxyXG5cdC5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyhlcnIpXHJcblx0fSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRMaWtlQXBpID0gKGNhcmRJZCkgPT4ge1xyXG5cdHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG5cdFx0bWV0aG9kOiAnUFVUJyxcclxuXHRcdGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRfaWQ6IGNhcmRJZFxyXG5cdFx0fSlcclxuXHR9KVxyXG5cdC50aGVuKHJlcyA9PiBjaGVja1Jlc3BvbnNlKHJlcykpXHJcblx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKGVycilcclxuXHR9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbGlrZURlbGV0ZUFwaSA9IChjYXJkSWQpID0+IHtcclxuXHRyZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuXHRcdG1ldGhvZDogJ0RFTEVURScsXHJcblx0XHRoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuXHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFx0X2lkOiBjYXJkSWRcclxuXHRcdH0pXHJcblx0fSlcclxuXHQudGhlbihyZXMgPT4gY2hlY2tSZXNwb25zZShyZXMpKVxyXG5cdC5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyhlcnIpXHJcblx0fSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhciA9IChhdmF0YXJMaW5rKSA9PiB7XHJcblx0cmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcblx0XHRtZXRob2Q6ICdQQVRDSCcsXHJcblx0XHRoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuXHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuXHRcdFx0YXZhdGFyOiBhdmF0YXJMaW5rXHJcblx0XHR9KVxyXG5cdH0pXHJcblx0LnRoZW4ocmVzID0+IGNoZWNrUmVzcG9uc2UocmVzKSlcclxuXHQuY2F0Y2goKGVycikgPT4ge1xyXG5cdFx0Y29uc29sZS5sb2coZXJyKVxyXG5cdH0pXHJcbn0iLCJpbXBvcnQgeyBcclxuXHRpbWFnZVBvcHVwQ29udGFpbmVyfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5pbXBvcnQgeyBjYXJkRGVsZXRlQXBpLCBjYXJkTGlrZUFwaSwgbGlrZURlbGV0ZUFwaSB9IGZyb20gJy4vYXBpJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0sIGRlbGV0ZUNhcmQsIG9wZW5DYXJkLCB1c2VySWQpIHtcclxuXHRjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZC10ZW1wbGF0ZScpLmNvbnRlbnQ7XHJcblx0Y29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSlcclxuXHRjb25zdCBkZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpXHJcblx0Y29uc3QgbGlrZXNOdW1iZXIgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1udW1iZXJzJylcclxuXHRjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKVxyXG5cdGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKVxyXG5cdGNhcmRJbWFnZS5zcmMgPSBpdGVtLmxpbmtcclxuXHRjYXJkSW1hZ2UuYWx0ID0gaXRlbS5uYW1lXHJcblx0bGlrZXNOdW1iZXIudGV4dENvbnRlbnQgPSBpdGVtLmxpa2VzLmxlbmd0aFxyXG5cclxuXHRjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZVxyXG5cdGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcclxuXHRcdGlmIChsaWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZVwiKSl7XHJcblx0XHRcdGxpa2VEZWxldGVBcGkoaXRlbS5faWQpXHJcblx0XHRcdC50aGVuKHJlcyA9PiB7XHJcblx0XHRcdFx0bGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmUnKVxyXG5cdFx0XHRcdGxpa2VzTnVtYmVyLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aFxyXG5cdFx0XHR9KVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdGNhcmRMaWtlQXBpKGl0ZW0uX2lkKVxyXG5cdFx0LnRoZW4ocmVzID0+IHtcclxuXHRcdFx0bGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlLWJ1dHRvbl9pcy1hY3RpdmUnKVxyXG5cdFx0XHRsaWtlc051bWJlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGhcclxuXHRcdH1cclxuXHRcdCl9XHJcblx0fSBcclxuXHQpXHJcblxyXG5cdGNvbnN0IHJlbW92ZUJ1dHRvbkNsaWNrID0gKCkgPT4ge1xyXG5cdFx0ZGVsZXRlQ2FyZChjYXJkRWxlbWVudClcclxuXHRcdGNhcmREZWxldGVBcGkoaXRlbS5faWQpXHJcblx0fVxyXG5cdGl0ZW0ubGlrZXMuZm9yRWFjaChsaWtlID0+IHtcclxuXHRcdGlmIChsaWtlLl9pZCA9PT0gdXNlcklkKSB7XHJcblx0XHRcdGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS1idXR0b25faXMtYWN0aXZlJylcclxuXHRcdH1cclxuXHR9KVxyXG5cclxuXHRpZiAodXNlcklkID09PSBpdGVtLm93bmVyLl9pZCkge1xyXG5cdFx0ZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2RlbGV0ZS1idXR0b24taGlkZGVuJylcclxuXHRcdGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbW92ZUJ1dHRvbkNsaWNrKVxyXG5cdH1cclxuXHRjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7b3BlbkNhcmQoaW1hZ2VQb3B1cENvbnRhaW5lciwgaXRlbSl9KVxyXG5cdFxyXG5cdHJldHVybiBjYXJkRWxlbWVudFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ2FyZChjYXJkKSB7XHJcblx0Y2FyZC5yZW1vdmUoKVxyXG59XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBjbG9zZVBvcHVwIChvcGVuZWRQb3B1cCkge1xyXG5cdG9wZW5lZFBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2lzLW9wZW5lZCcpXHJcblx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlc2NhcGVIYW5kbGVyKVx0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuUG9wdXAgKHBvcHVwKSB7XHJcblx0cG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfaXMtb3BlbmVkJylcclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVzY2FwZUhhbmRsZXIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVzY2FwZUhhbmRsZXIoZXZ0KSB7XHJcblx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRjb25zdCBvcGVuZWRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9pcy1vcGVuZWQnKVxyXG5cdCAgY2xvc2VQb3B1cChvcGVuZWRQb3B1cClcclxuXHR9XHJcbn0iLCJjb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgZWxlbWVudCwgZXJyb3JNZXNzYWdlLCBzZXR0aW5ncykgPT4ge1xyXG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2VsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7ZWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxufTtcclxuXHJcbmNvbnN0IGlzVmFsaWQgPSAoZm9ybUVsZW1lbnQsIGZvcm1JbnB1dCwgc2V0dGluZ3MpID0+IHtcclxuICBpZiAoZm9ybUlucHV0LnZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaCkge1xyXG4gICAgZm9ybUlucHV0LnNldEN1c3RvbVZhbGlkaXR5KCfQoNCw0LfRgNC10YjQtdC90Ysg0YLQvtC70YzQutC+INC70LDRgtC40L3RgdC60LjQtSwg0LrQuNGA0LjQu9C70LjRh9C10YHQutC40LUg0LHRg9C60LLRiywg0LfQvdCw0LrQuCDQtNC10YTQuNGB0LAg0Lgg0L/RgNC+0LHQtdC70YsnKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBmb3JtSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpXHJcbiAgfVxyXG5cclxuICBpZiAoIWZvcm1JbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGZvcm1JbnB1dCwgZm9ybUlucHV0LnZhbGlkYXRpb25NZXNzYWdlLCBzZXR0aW5ncyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBmb3JtSW5wdXQsIHNldHRpbmdzKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKVxyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgaXNWYWxpZChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncylcclxuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBzZXR0aW5ncylcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH0pXHJcbn07IFxyXG5cclxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfSBlbHNlIHtcclxuICAgICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG59OyBcclxuXHJcbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSlcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGVhclZhbGlkYXRpb24oZm9ybUVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgY29uc3QgZm9ybVRhZyA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpXHJcbiAgY29uc3QgaW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSk7XHJcblxyXG4gIGlucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncyk7XHJcbiAgfSk7XHJcbiAgZm9ybVRhZy5yZXNldCgpXHJcbn0iLCJpbXBvcnQgJy4vcGFnZXMvaW5kZXguY3NzJztcclxuaW1wb3J0IHsgXHJcblx0ZGVsZXRlQ2FyZCwgXHJcblx0Y3JlYXRlQ2FyZH0gZnJvbSAnLi9jb21wb25lbnRzL2NhcmQuanMnO1xyXG5pbXBvcnQge1xyXG5cdG5ld0NhcmRCdXR0b24sIFxyXG5cdGNsb3NlQnV0dG9uLCBcclxuXHRmb3JtRWxlbWVudCwgXHJcblx0Y2FyZEZvcm0sIFxyXG5cdGFsbFBvcHVwcyxcclxuXHRmb3JtTmFtZSxcclxuXHRmb3JtRGVzYyxcclxuXHRwb3B1cEVkaXQsXHJcblx0cGxhY2VzTGlzdCxcclxuXHRlZGl0QnV0dG9uLFxyXG5cdHByb2ZpbGVUaXRsZSxcclxuXHRwcm9maWxlRGVzYyxcclxuXHRpbWFnZVBvcHVwLFxyXG5cdGltYWdlVGl0bGVQb3B1cCxcclxuXHRuZXdDYXJkUG9wdXAsXHJcblx0dmFsaWRhdGlvbkNvbmZpZyxcclxuXHRhdmF0YXJGb3JtLFxyXG5cdGF2YXRhckxpbmtJbnB1dCxcclxuXHRhdmF0YXJQb3B1cCxcclxuXHRwcm9maWxlQXZhdGFyLFxyXG5cdG5ld0F2YXRhckJ1dHRvbn0gZnJvbSAnLi9jb21wb25lbnRzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7IFxyXG5cdGhhbmRsZUZvcm1DcmVhdGUsIFxyXG5cdGhhbmRsZUZvcm1TdWJtaXR9IGZyb20gJy4vY29tcG9uZW50cy9mb3Jtcy5qcyc7XHJcblxyXG5pbXBvcnQgeyBcclxuXHRvcGVuUG9wdXAsIFxyXG5cdGNsb3NlUG9wdXAgfSBmcm9tICcuL2NvbXBvbmVudHMvbW9kYWwuanMnO1xyXG5cclxuaW1wb3J0IHtjbGVhclZhbGlkYXRpb24sIGVuYWJsZVZhbGlkYXRpb259IGZyb20gJy4vY29tcG9uZW50cy92YWxpZGF0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7IHNlcnZlckNhcmRzLCBnZXRQcm9maWxlLCB1cGRhdGVBdmF0YXIgfSBmcm9tICcuL2NvbXBvbmVudHMvYXBpLmpzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRDYXJkKGl0ZW0sIGRlbGV0ZUNhcmQsIG9wZW5DYXJkLCB1c2VySWQpIHtcclxuXHRjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSwgZGVsZXRlQ2FyZCwgIG9wZW5DYXJkLCB1c2VySWQpXHJcblx0cGxhY2VzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KVxyXG59XHJcblx0XHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuQ2FyZCAoaW1hZ2VDb250LCBjYXJkKSB7XHJcblx0aW1hZ2VQb3B1cC5zcmMgPSBjYXJkLmxpbmtcclxuXHRpbWFnZVBvcHVwLmFsdCA9IGNhcmQubmFtZVxyXG5cdGltYWdlVGl0bGVQb3B1cC50ZXh0Q29udGVudCA9IGNhcmQubmFtZVxyXG5cdG9wZW5Qb3B1cChpbWFnZUNvbnQpXHJcbn1cclxuXHJcblxyXG5cclxubmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblx0Y2xlYXJWYWxpZGF0aW9uKG5ld0NhcmRQb3B1cCwgdmFsaWRhdGlvbkNvbmZpZylcclxuXHRvcGVuUG9wdXAobmV3Q2FyZFBvcHVwKVxyXG59KVxyXG5cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblx0Y2xlYXJWYWxpZGF0aW9uKHBvcHVwRWRpdCwgdmFsaWRhdGlvbkNvbmZpZylcclxuXHRmb3JtTmFtZS52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudFxyXG5cdGZvcm1EZXNjLnZhbHVlID0gcHJvZmlsZURlc2MudGV4dENvbnRlbnRcclxuXHRvcGVuUG9wdXAocG9wdXBFZGl0KVxyXG59KVxyXG5cclxuY2xvc2VCdXR0b24uZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGNsb3NlUG9wdXAoYnV0dG9uLmNsb3Nlc3QoJy5wb3B1cCcpKVxyXG59KSlcclxuXHJcbmZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUZvcm1TdWJtaXQpO1xyXG5jYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVGb3JtQ3JlYXRlKVxyXG5cclxuYWxsUG9wdXBzLmZvckVhY2gocG9wdXAgPT4gcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcblx0aWYgKGV2dC5jdXJyZW50VGFyZ2V0ID09PSBldnQudGFyZ2V0KSB7XHJcbiAgICBjbG9zZVBvcHVwKHBvcHVwKVxyXG4gIH1cclxufSkpXHJcbmFsbFBvcHVwcy5mb3JFYWNoKHBvcHVwID0+IHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2lzLWFuaW1hdGVkJykpXHJcblxyXG5cclxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKVxyXG5cclxuUHJvbWlzZS5hbGwoW3NlcnZlckNhcmRzKCksIGdldFByb2ZpbGUoKV0pXHJcbi50aGVuKChbY2FyZHMsIHByb2ZpbGVdKSA9PiB7XHJcblx0Y2FyZHMuZm9yRWFjaChpdGVtID0+IHtcclxuXHRcdGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0sIGRlbGV0ZUNhcmQsIG9wZW5DYXJkLCBwcm9maWxlLl9pZClcclxuXHRcdHBsYWNlc0xpc3QuYXBwZW5kKGNhcmQpXHJcblx0fSlcclxuXHRwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBwcm9maWxlLm5hbWVcclxuXHRwcm9maWxlRGVzYy50ZXh0Q29udGVudCA9IHByb2ZpbGUuYWJvdXRcclxuXHRwcm9maWxlQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7cHJvZmlsZS5hdmF0YXJ9JylgXHJcblx0c2V0dXBBdmF0YXJDaGFuZ2UoKVxyXG59KVxyXG5cclxuZnVuY3Rpb24gc2V0dXBBdmF0YXJDaGFuZ2UoKSB7XHJcbiAgcHJvZmlsZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIG9wZW5Qb3B1cChhdmF0YXJQb3B1cCk7XHJcbiAgfSk7XHJcbiAgYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdG5ld0F2YXRhckJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLidcclxuICAgICAgdXBkYXRlQXZhdGFyKGF2YXRhckxpbmtJbnB1dC52YWx1ZSlcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgcHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke3Jlcy5hdmF0YXJ9JylgXHJcbiAgICAgICAgICAgIGNsb3NlUG9wdXAoYXZhdGFyUG9wdXApXHJcblx0XHRcdFx0XHRcdG5ld0F2YXRhckJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnXHJcbiAgICAgICAgICB9KVxyXG5cdH0pXHJcbn1cclxuIiwiaW1wb3J0IHtcclxuXHRuYW1lSW5wdXQsIFxyXG5cdGpvYklucHV0LCBcclxuXHRwbGFjZU5hbWVJbnB1dCwgXHJcblx0cGxhY2VVcmxJbnB1dCwgXHJcblx0cHJvZmlsZVRpdGxlLCBcclxuXHRwcm9maWxlRGVzYyxcclxuXHRuZXdDYXJkUG9wdXAsXHJcblx0cHJvZmlsZUVkaXRQb3B1cCxcclxuXHRjYXJkRm9ybSxcclxuXHRuZXdQbGFjZUJ1dHRvbixcclxuXHRlZGl0UHJvZmlsZUJ1dHRvbn0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBkZWxldGVDYXJkfSBmcm9tICcuL2NhcmQnO1xyXG5pbXBvcnQgeyBjbG9zZVBvcHVwIH0gZnJvbSAnLi9tb2RhbC5qcyc7XHJcbmltcG9ydCB7IG9wZW5DYXJkIH0gZnJvbSAnLi4vaW5kZXguanMnO1xyXG5pbXBvcnQgeyBhZGRDYXJkIH0gZnJvbSAnLi4vaW5kZXguanMnXHJcbmltcG9ydCB7IGNoYW5nZVByb2ZpbGUsIGNhcmRDcmVhdGVBcGkgfSBmcm9tICcuL2FwaS5qcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdChldnQpIHtcclxuXHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHRjb25zdCBqb2JWYWx1ZSA9IGpvYklucHV0LnZhbHVlXHJcblx0Y29uc3QgbmFtZVZhbHVlID0gbmFtZUlucHV0LnZhbHVlXHJcblx0ZWRpdFByb2ZpbGVCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXHJcblx0Y2hhbmdlUHJvZmlsZShuYW1lVmFsdWUsIGpvYlZhbHVlKVxyXG5cdC5maW5hbGx5KCgpID0+IHtcclxuXHRcdHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IG5hbWVWYWx1ZVxyXG5cdFx0cHJvZmlsZURlc2MudGV4dENvbnRlbnQgPSBqb2JWYWx1ZVxyXG5cdFx0Y2xvc2VQb3B1cChwcm9maWxlRWRpdFBvcHVwKVxyXG5cdFx0ZWRpdFByb2ZpbGVCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJ1xyXG5cdH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVGb3JtQ3JlYXRlKGV2dCkge1xyXG5cdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IHBsYWNlTmFtZVZhbHVlID0gcGxhY2VOYW1lSW5wdXQudmFsdWVcclxuXHRjb25zdCBwbGFjZVVybFZhbHVlID0gcGxhY2VVcmxJbnB1dC52YWx1ZVxyXG5cdG5ld1BsYWNlQnV0dG9uLnRleHRDb250ZW50ID0n0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXHJcblx0Y2FyZENyZWF0ZUFwaShwbGFjZU5hbWVWYWx1ZSwgcGxhY2VVcmxWYWx1ZSlcclxuXHQudGhlbihyZXMgPT57XHJcblx0XHRhZGRDYXJkKHJlcywgZGVsZXRlQ2FyZCwgb3BlbkNhcmQsIHJlcy5vd25lci5faWQpXHJcblx0XHRjYXJkRm9ybS5yZXNldCgpXHJcblx0fSlcclxuXHQuZmluYWxseSgoKSA9PiB7XHJcblx0XHRuZXdQbGFjZUJ1dHRvbi50ZXh0Q29udGVudCA9J9Ch0L7RhdGA0LDQvdC40YLRjCdcclxuXHRcdGNsb3NlUG9wdXAobmV3Q2FyZFBvcHVwKVxyXG5cdH0pXHJcbn1cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicGxhY2VzTGlzdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjIiwiZWRpdEJ1dHRvbiIsIm5ld0NhcmRCdXR0b24iLCJjbG9zZUJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JtRWxlbWVudCIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicGxhY2VOYW1lSW5wdXQiLCJwbGFjZVVybElucHV0IiwiY2FyZEZvcm0iLCJjbG9zZXN0IiwiYWxsUG9wdXBzIiwiaW1hZ2VQb3B1cENvbnRhaW5lciIsInBvcHVwRWRpdCIsImZvcm1OYW1lIiwiZm9ybURlc2MiLCJpbWFnZVBvcHVwIiwiaW1hZ2VUaXRsZVBvcHVwIiwicHJvZmlsZUVkaXRQb3B1cCIsIm5ld0NhcmRQb3B1cCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVBdmF0YXIiLCJhdmF0YXJGb3JtIiwiZm9ybXMiLCJhdmF0YXJQb3B1cCIsImF2YXRhckxpbmtJbnB1dCIsIm5ld1BsYWNlQnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsIm5ld0F2YXRhckJ1dHRvbiIsImNvbmZpZyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImhlYWRlcnNUb2tlbiIsImNoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiY29uY2F0Iiwic3RhdHVzIiwiY2FyZERlbGV0ZUFwaSIsImNhcmRJZCIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJfaWQiLCJ0aGVuIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY2FyZExpa2VBcGkiLCJsaWtlRGVsZXRlQXBpIiwiY3JlYXRlQ2FyZCIsIml0ZW0iLCJkZWxldGVDYXJkIiwib3BlbkNhcmQiLCJ1c2VySWQiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJkZWxldGVCdXR0b24iLCJsaWtlc051bWJlciIsImNhcmRJbWFnZSIsImxpa2VCdXR0b24iLCJzcmMiLCJsaW5rIiwiYWx0IiwibmFtZSIsInRleHRDb250ZW50IiwibGlrZXMiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ0b2dnbGUiLCJmb3JFYWNoIiwibGlrZSIsIm93bmVyIiwicmVtb3ZlIiwiY2FyZCIsImNsb3NlUG9wdXAiLCJvcGVuZWRQb3B1cCIsIndpbmRvdyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlc2NhcGVIYW5kbGVyIiwib3BlblBvcHVwIiwicG9wdXAiLCJhZGQiLCJldnQiLCJzZXR0aW5ncyIsImhpZGVJbnB1dEVycm9yIiwiZWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImNsZWFyVmFsaWRhdGlvbiIsImZvcm1UYWciLCJBcnJheSIsImZyb20iLCJyZXNldCIsImFkZENhcmQiLCJwcmVwZW5kIiwiaW1hZ2VDb250IiwidmFsdWUiLCJidXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsImFib3V0Iiwiam9iVmFsdWUiLCJuYW1lVmFsdWUiLCJmaW5hbGx5IiwicGxhY2VOYW1lVmFsdWUiLCJwbGFjZVVybFZhbHVlIiwiY3VycmVudFRhcmdldCIsInRhcmdldCIsImZvcm1JbnB1dCIsInBhdHRlcm5NaXNtYXRjaCIsInNldEN1c3RvbVZhbGlkaXR5IiwiZXJyb3JNZXNzYWdlIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlzVmFsaWQiLCJzZXRFdmVudExpc3RlbmVycyIsImFsbCIsIl9yZWYiLCJfcmVmMiIsImNhcmRzIiwicHJvZmlsZSIsImFwcGVuZCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiYXZhdGFyIiwiZXZlbnQiLCJhdmF0YXJMaW5rIl0sInNvdXJjZVJvb3QiOiIifQ==